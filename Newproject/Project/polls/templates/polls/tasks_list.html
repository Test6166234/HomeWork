{% extends 'polls/base.html' %}

{% block content %}
    <style>
        /* ... (Существующие стили колонок без изменений) ... */
        .board-container { display: flex; gap: 20px; justify-content: space-around; }
        .task-column {
            flex: 1; padding: 15px; background-color: #111; border-radius: 8px; min-width: 250px;
            display: flex; flex-direction: column; box-shadow: 0 0 10px rgba(255, 165, 0, 0.5); border: 1px solid #ffaa00;
        }
        .task-column h2 { color: #FFD700; text-shadow: none; }
        .task-item-container {
            display: flex; justify-content: space-between; align-items: center; background-color: #333;
            padding: 8px; margin-bottom: 10px; border-radius: 4px; border: 1px solid #555;
        }
        .task-item-container span { color: white; }
        .btn-detail {
            padding: 5px 10px; background-color: #FFD700; color: black; text-decoration: none; border-radius: 4px;
            font-size: 0.8em; font-weight: bold;
        }
        .add-task-button {
            margin-top: auto; padding: 10px; background-color: #FFD700; color: black; text-align: center;
            text-decoration: none; border-radius: 5px; cursor: pointer; margin-top: 15px; font-weight: bold;
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
        }
        .add-task-button:hover { background-color: #ffe567; }
        .no-tasks { color: #aaa; font-style: italic; padding: 10px; }

        /* !!! СТИЛИ ДЛЯ БОЛЬШОЙ РАМКИ С ПЕРЕЛИВАНИЕМ ЦВЕТА СВЕРХУ/СНИЗУ !!! */
        .main-frame {
            padding: 20px;
            border-radius: 15px;
            background-color: rgba(30, 30, 30, 0.5);
            /* Начальное состояние тени */
            box-shadow: 0 -10px 30px rgba(255, 165, 0, 0.7), 0 10px 30px rgba(255, 165, 0, 0.7);
            /* Добавляем анимацию */
            animation: glowingFrame 5s infinite alternate;
        }

        /* Анимация переливания/свечения */
        @keyframes glowingFrame {
            /* Цвет меняется с оранжевого на желтый и обратно */
            0% {
                box-shadow: 0 -10px 30px rgba(255, 165, 0, 0.7), 0 10px 30px rgba(255, 165, 0, 0.7); /* Оранжевый */
            }
            50% {
                box-shadow: 0 -15px 40px rgba(255, 215, 0, 0.8), 0 15px 40px rgba(255, 215, 0, 0.8); /* Желтый */
            }
            100% {
                box-shadow: 0 -10px 30px rgba(255, 165, 0, 0.7), 0 10px 30px rgba(255, 165, 0, 0.7); /* Снова оранжевый */
            }
        }
    </style>

    <!-- КОНТЕЙНЕР РАМКИ -->
    <div class="main-frame">
        <h1>Доска задач</h1>

        <div class="board-container">
            {% for column in task_columns %}
                <div class="task-column {{ column.css_class }}">
                    <h2 class="column-title">{{ column.title }}</h2>

                    {% if column.tasks %}
                        <div class="task-list">
                            {% for task in column.tasks %}
                                <div class="task-item-container">
                                    <span>{{ task.title }}</span>
                                    <a href="{% url 'task_detail' task_id=task.id %}" class="btn-detail">
                                        Подробнее
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="no-tasks">Нет задач</p>
                    {% endif %}

                    <a href="{% url 'create_task_with_status' status=column.css_class %}" class="add-task-button">
                        + Добавить в "{{ column.title }}"
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>
    <!-- КОНЕЦ КОНТЕЙНЕРА РАМКИ -->
{% endblock %}
